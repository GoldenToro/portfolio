<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="shortcut icon" href="#">
    <title>Procedural Planets</title>
    <link rel="stylesheet" type="text/css" href="/space/styles.css">
</head>

<body>
<div id="app">

    <div id="overlay-menu">

        <!-- Toggle Audio button -->
        <button id="toggleButton" class="svg-button" onkeyup="event.preventDefault()">
            <svg id="muteIcon" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="currentColor" style="display: none;">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <g id="Shopicon">
                        <path d="M8,42.828L18.448,32.38l11.647,9.32V20.733L42.828,8L40,5.172l-9.905,9.905V5.375L17.397,15.539h-7.303v16h3.538L5.172,40 L8,42.828z M26.095,33.376l-4.8-3.842l4.8-4.801V33.376z M14.095,19.539h4.707l7.293-5.838v5.376l-8.462,8.462h-3.538V19.539z"></path>
                    </g>
                </g>
            </svg>
            <svg id="unmuteIcon" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="currentColor">
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <g id="Shopicon">
                        <path d="M24,42.161V5.836L11.303,16H4v16h7.303L24,42.161z M8,20h4.707L20,14.162v19.675L12.707,28H8V20z"></path>
                        <path d="M28,28v4c4.411,0,8-3.589,8-8s-3.589-8-8-8v4c2.206,0,4,1.794,4,4S30.206,28,28,28z"></path>
                        <path d="M44,24c0-9.374-7.626-17-17-17v4c7.168,0,13,5.832,13,13s-5.832,13-13,13v4C36.374,41,44,33.374,44,24z"></path>
                    </g>
                </g>
            </svg>
        </button>

        <!-- Pause/Resume Rendering button -->
        <button id="pauseButton" class="svg-button" onkeyup="event.preventDefault()">
            <svg id="pauseIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                <rect x="6" y="4" width="4" height="16"/>
                <rect x="14" y="4" width="4" height="16"/>
            </svg>
            <svg id="playIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M16.6582 9.28638C18.098 10.1862 18.8178 10.6361 19.0647 11.2122C19.2803 11.7152 19.2803 12.2847 19.0647 12.7878C18.8178 13.3638 18.098 13.8137 16.6582 14.7136L9.896 18.94C8.29805 19.9387 7.49907 20.4381 6.83973 20.385C6.26501 20.3388 5.73818 20.0469 5.3944 19.584C5 19.053 5 18.1108 5 16.2264V7.77357C5 5.88919 5 4.94701 5.3944 4.41598C5.73818 3.9531 6.26501 3.66111 6.83973 3.6149C7.49907 3.5619 8.29805 4.06126 9.896 5.05998L16.6582 9.28638Z"
                          stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
                </g>
            </svg>
        </button>


    </div>

    <div id="overlay-pause" class="fade-in">

        <div>
            <h2>Your Mission:</h2>
            <p>You are lost in the Project Universe. To find your way back home, you need to orient yourself using the planets around you. Locate all the planets and return home. (also it looks better on PC)</p>
        </div>
        <div>

            <h2>Controls</h2>
            <table style="width:100%">
                <tr>
                    <td>W / UP</td>
                    <td>Accelerate</td>
                </tr>
                <tr>
                    <td>S / DOWN</td>
                    <td>Deccelerate</td>
                </tr>
                <tr>
                    <td>A / LEFT</td>
                    <td>Turn Left</td>
                </tr>
                <tr>
                    <td>D / Right</td>
                    <td>Turn Right</td>
                </tr>
                <tr>
                    <td>Space</td>
                    <td>Open Map</td>
                </tr>
            </table>
            <p>Click on any planet<br>to enter or exit it.</p>

        </div>

        <!-- Music by  -->
        <!-- Sound Effect by  -->

        <div>
            <h3>Credits</h3>
            <table style="width:100%">
                <tr>
                    <td>Music by</td>
                    <td><a href="https://pixabay.com/users/lvymusic-27953103/?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=124841">Yurii Kohut</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=124841">Pixabay</a></td>
                </tr>
                <tr>
                    <td>Soundeffect by</td>
                    <td><a href="https://pixabay.com/users/jci21-31266556/?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=164114">JC I</a> from <a href="https://pixabay.com/sound-effects//?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=164114">Pixabay</a></td>
                </tr>
                <tr>
                    <td>Particlesystem from</td>
                    <td><a href="https://github.com/simondevyoutube/ThreeJS_Tutorial_ParticleSystems">simondevyoutube</a></td>
                </tr>
                <tr>
                    <td>Rocket 3D-Modell by</td>
                    <td><a href="https://sketchfab.com/3d-models/rocket-high-poly-simple-free-34eb9f0902f640a0a112e6f16261b755"> brazzy_CGI </a></td>
                </tr>
            </table>

        </div>

    </div>

    <div id="text-planetNr">0 / N Planets visited</div>

    <div id="overlay-planet" class="overlay-hide">

        <p id="TL">Projekt Planet: <br></p>
        <div class="line" id="lineTL1"></div>
        <div class="line" id="lineTL2"></div>

        <p id="TR">STATUS: </p>
        <div class="line" id="lineTR1"></div>
        <div class="line" id="lineTR2"></div>

        <p id="BL">Beschreibung: <br></p>

        <div id="link">

            <p id="BR"><a href=".">SCHNELLREISE</a></p>
            <div class="line" id="lineBR1"></div>
            <div class="line" id="lineBR2"></div>

        </div>


    </div>


    <script>

        const keyState = {};

        function startKeyPress(key) {
            keyState[key] = true; // Set key state to true
        }

        // Function to stop key press simulation
        function stopKeyPress(key) {
            keyState[key] = false; // Set key state to false
        }
    </script>
    <div id="overlay-mobileControl">

        <!-- Pause/Resume Rendering button -->
        <button id="worldButton" class="svg-button" onkeyup="event.preventDefault()" ontouchstart="startKeyPress('Space')" ontouchend="stopKeyPress('Space')">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M12 6H12.01M9 20L3 17V4L5 5M9 20L15 17M9 20V14M15 17L21 20V7L19 6M15 17V14M15 6.2C15 7.96731 13.5 9.4 12 11C10.5 9.4 9 7.96731 9 6.2C9 4.43269 10.3431 3 12 3C13.6569 3 15 4.43269 15 6.2Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
            </svg>
        </button>
        <button id="rightButton" class="svg-button" onkeyup="event.preventDefault()" ontouchstart="startKeyPress('ArrowRight')" ontouchend="stopKeyPress('ArrowRight')">
            <svg id="playIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M16.6582 9.28638C18.098 10.1862 18.8178 10.6361 19.0647 11.2122C19.2803 11.7152 19.2803 12.2847 19.0647 12.7878C18.8178 13.3638 18.098 13.8137 16.6582 14.7136L9.896 18.94C8.29805 19.9387 7.49907 20.4381 6.83973 20.385C6.26501 20.3388 5.73818 20.0469 5.3944 19.584C5 19.053 5 18.1108 5 16.2264V7.77357C5 5.88919 5 4.94701 5.3944 4.41598C5.73818 3.9531 6.26501 3.66111 6.83973 3.6149C7.49907 3.5619 8.29805 4.06126 9.896 5.05998L16.6582 9.28638Z"
                          stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
                </g>
            </svg>
        </button>
        <button id="leftButton" class="svg-button" onkeyup="event.preventDefault()" ontouchstart="startKeyPress('ArrowLeft')" ontouchend="stopKeyPress('ArrowLeft')">
            <svg id="playIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M16.6582 9.28638C18.098 10.1862 18.8178 10.6361 19.0647 11.2122C19.2803 11.7152 19.2803 12.2847 19.0647 12.7878C18.8178 13.3638 18.098 13.8137 16.6582 14.7136L9.896 18.94C8.29805 19.9387 7.49907 20.4381 6.83973 20.385C6.26501 20.3388 5.73818 20.0469 5.3944 19.584C5 19.053 5 18.1108 5 16.2264V7.77357C5 5.88919 5 4.94701 5.3944 4.41598C5.73818 3.9531 6.26501 3.66111 6.83973 3.6149C7.49907 3.5619 8.29805 4.06126 9.896 5.05998L16.6582 9.28638Z"
                          stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
                </g>
            </svg>
        </button>
        <button id="topButton" class="svg-button" onkeyup="event.preventDefault()" ontouchstart="startKeyPress('ArrowUp')" ontouchend="stopKeyPress('ArrowUp')">
            <svg id="playIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M16.6582 9.28638C18.098 10.1862 18.8178 10.6361 19.0647 11.2122C19.2803 11.7152 19.2803 12.2847 19.0647 12.7878C18.8178 13.3638 18.098 13.8137 16.6582 14.7136L9.896 18.94C8.29805 19.9387 7.49907 20.4381 6.83973 20.385C6.26501 20.3388 5.73818 20.0469 5.3944 19.584C5 19.053 5 18.1108 5 16.2264V7.77357C5 5.88919 5 4.94701 5.3944 4.41598C5.73818 3.9531 6.26501 3.66111 6.83973 3.6149C7.49907 3.5619 8.29805 4.06126 9.896 5.05998L16.6582 9.28638Z"
                          stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
                </g>
            </svg>
        </button>
        <button id="bottomButton" class="svg-button" onkeyup="event.preventDefault()" ontouchstart="startKeyPress('ArrowDown')" ontouchend="stopKeyPress('ArrowDown')">
            <svg id="playIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M16.6582 9.28638C18.098 10.1862 18.8178 10.6361 19.0647 11.2122C19.2803 11.7152 19.2803 12.2847 19.0647 12.7878C18.8178 13.3638 18.098 13.8137 16.6582 14.7136L9.896 18.94C8.29805 19.9387 7.49907 20.4381 6.83973 20.385C6.26501 20.3388 5.73818 20.0469 5.3944 19.584C5 19.053 5 18.1108 5 16.2264V7.77357C5 5.88919 5 4.94701 5.3944 4.41598C5.73818 3.9531 6.26501 3.66111 6.83973 3.6149C7.49907 3.5619 8.29805 4.06126 9.896 5.05998L16.6582 9.28638Z"
                          stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
                </g>
            </svg>
        </button>

    </div>

    <div id="youDied">
        <div>YOU DIED</div>
        <div>Press F5 to play again</div>
    </div>
    <div id="youWon">
        <div>YOU WON</div>
        <div>Press F5 to play again</div>
    </div>
</div>


<!-- SHADERS -->
<script type="x-shader/x-vertex" id="noise-functions">
    const float PI = 3.14159265;

    //	Simplex 3D Noise
    //	by Ian McEwan, Ashima Arts
    //
    vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}
    vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}

    //
    float simplex3(vec3 v) {
      const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
      const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

      // First corner
      vec3 i  = floor(v + dot(v, C.yyy) );
      vec3 x0 =   v - i + dot(i, C.xxx) ;

      // Other corners
      vec3 g = step(x0.yzx, x0.xyz);
      vec3 l = 1.0 - g;
      vec3 i1 = min( g.xyz, l.zxy );
      vec3 i2 = max( g.xyz, l.zxy );

      //  x0 = x0 - 0. + 0.0 * C
      vec3 x1 = x0 - i1 + 1.0 * C.xxx;
      vec3 x2 = x0 - i2 + 2.0 * C.xxx;
      vec3 x3 = x0 - 1. + 3.0 * C.xxx;

      // Permutations
      i = mod(i, 289.0 );
      vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

      // Gradients
      // ( N*N points uniformly over a square, mapped onto an octahedron.)
      float n_ = 1.0/7.0; // N=7
      vec3  ns = n_ * D.wyz - D.xzx;

      vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)

      vec4 x_ = floor(j * ns.z);
      vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)

      vec4 x = x_ *ns.x + ns.yyyy;
      vec4 y = y_ *ns.x + ns.yyyy;
      vec4 h = 1.0 - abs(x) - abs(y);

      vec4 b0 = vec4( x.xy, y.xy );
      vec4 b1 = vec4( x.zw, y.zw );

      vec4 s0 = floor(b0)*2.0 + 1.0;
      vec4 s1 = floor(b1)*2.0 + 1.0;
      vec4 sh = -step(h, vec4(0.0));

      vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
      vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

      vec3 p0 = vec3(a0.xy,h.x);
      vec3 p1 = vec3(a0.zw,h.y);
      vec3 p2 = vec3(a1.xy,h.z);
      vec3 p3 = vec3(a1.zw,h.w);

      //Normalise gradients
      vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
      p0 *= norm.x;
      p1 *= norm.y;
      p2 *= norm.z;
      p3 *= norm.w;

      // Mix final noise value
      vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
      m = m * m;
      return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                    dot(p2,x2), dot(p3,x3) ) );
    }

    float fractal3(
      vec3 v,
      float sharpness,
      float period,
      float persistence,
      float lacunarity,
      int octaves
    ) {
      float n = 0.0;
      float a = 1.0; // Amplitude for current octave
      float max_amp = 0.0; // Accumulate max amplitude so we can normalize after
      float P = period;  // Period for current octave

      for(int i = 0; i < octaves; i++) {
          n += a * simplex3(v / P);
          a *= persistence;
          max_amp += a;
          P /= lacunarity;
      }

      // Normalize noise between [0.0, amplitude]
      return n / max_amp;
    }

    float terrainHeight(
      int type,
      vec3 v,
      float amplitude,
      float sharpness,
      float offset,
      float period,
      float persistence,
      float lacunarity,
      int octaves
    ) {
      float h = 0.0;

      if (type == 1) {
        h = amplitude * simplex3(v / period);
      } else if (type == 2) {
        h = amplitude * fractal3(
          v,
          sharpness,
          period,
          persistence,
          lacunarity,
          octaves);
        h = amplitude * pow(max(0.0, (h + 1.0) / 2.0), sharpness);
      } else if (type == 3) {
        h = fractal3(
          v,
          sharpness,
          period,
          persistence,
          lacunarity,
          octaves);
        h = amplitude * pow(max(0.0, 1.0 - abs(h)), sharpness);
      }

      // Multiply by amplitude and adjust offset
      return max(0.0, h + offset);
    }
</script>
<script type="x-shader/x-vertex" id="planet-vert-shader">
    attribute vec3 tangent;

    // Terrain generation parameters
    uniform int type;
    uniform float radius;
    uniform float amplitude;
    uniform float sharpness;
    uniform float offset;
    uniform float period;
    uniform float persistence;
    uniform float lacunarity;
    uniform int octaves;

    // Bump mapping
    uniform float bumpStrength;
    uniform float bumpOffset;

    varying vec3 fragPosition;
    varying vec3 fragNormal;
    varying vec3 fragTangent;
    varying vec3 fragBitangent;

    void main() {
      // Calculate terrain height
      float h = terrainHeight(
        type,
        position,
        amplitude,
        sharpness,
        offset,
        period,
        persistence,
        lacunarity,
        octaves);

      vec3 pos = position * (radius + h);

      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
      fragPosition = position;
      fragNormal = normal;
      fragTangent = tangent;
      fragBitangent = cross(normal, tangent);
    }
</script>
<script type="x-shader/x-fragment" id="planet-frag-shader">
    // Terrain generation parameters
    uniform int type;
    uniform float radius;
    uniform float amplitude;
    uniform float sharpness;
    uniform float offset;
    uniform float period;
    uniform float persistence;
    uniform float lacunarity;
    uniform int octaves;

    // Layer colors
    uniform vec3 color1;
    uniform vec3 color2;
    uniform vec3 color3;
    uniform vec3 color4;
    uniform vec3 color5;

    // Transition points for each layer
    uniform float transition2;
    uniform float transition3;
    uniform float transition4;
    uniform float transition5;

    // Amount of blending between each layer
    uniform float blend12;
    uniform float blend23;
    uniform float blend34;
    uniform float blend45;

    // Bump mapping parameters
    uniform float bumpStrength;
    uniform float bumpOffset;

    // Lighting parameters
    uniform float ambientIntensity;
    uniform float diffuseIntensity;
    uniform float specularIntensity;
    uniform float shininess;
    uniform vec3 lightDirection;
    uniform vec3 lightColor;

    varying vec3 fragPosition;
    varying vec3 fragNormal;
    varying vec3 fragTangent;
    varying vec3 fragBitangent;

    void main() {
      // Calculate terrain height
      float h = terrainHeight(
        type,
        fragPosition,
        amplitude,
        sharpness,
        offset,
        period,
        persistence,
        lacunarity,
        octaves);

      vec3 dx = bumpOffset * fragTangent;
      float h_dx = terrainHeight(
        type,
        fragPosition + dx,
        amplitude,
        sharpness,
        offset,
        period,
        persistence,
        lacunarity,
        octaves);

      vec3 dy = bumpOffset * fragBitangent;
      float h_dy = terrainHeight(
        type,
        fragPosition + dy,
        amplitude,
        sharpness,
        offset,
        period,
        persistence,
        lacunarity,
        octaves);

      vec3 pos = fragPosition * (radius + h);
      vec3 pos_dx = (fragPosition + dx) * (radius + h_dx);
      vec3 pos_dy = (fragPosition + dy) * (radius + h_dy);

      // Recalculate surface normal post-bump mapping
      vec3 bumpNormal = normalize(cross(pos_dx - pos, pos_dy - pos));
      // Mix original normal and bumped normal to control bump strength
      vec3 N = normalize(mix(fragNormal, bumpNormal, bumpStrength));

      // Normalized light direction (points in direction that light travels)
      vec3 L = normalize(-lightDirection);
      // View vector from camera to fragment
      vec3 V = normalize(cameraPosition - pos);
      // Reflected light vector
      vec3 R = normalize(reflect(L, N));

      float diffuse = diffuseIntensity * max(0.0, dot(N, -L));

      // https://ogldev.org/www/tutorial19/tutorial19.html
      float specularFalloff = clamp((transition3 - h) / transition3, 0.0, 1.0);
      float specular = max(0.0, specularFalloff * specularIntensity * pow(dot(V, R), shininess));

      float light = ambientIntensity + diffuse + specular;

      // Blender colors layer by layer
      vec3 color12 = mix(
        color1,
        color2,
        smoothstep(transition2 - blend12, transition2 + blend12, h));

      vec3 color123 = mix(
        color12,
        color3,
        smoothstep(transition3 - blend23, transition3 + blend23, h));

      vec3 color1234 = mix(
        color123,
        color4,
        smoothstep(transition4 - blend34, transition4 + blend34, h));

      vec3 finalColor = mix(
        color1234,
        color5,
        smoothstep(transition5 - blend45, transition5 + blend45, h));

      gl_FragColor = vec4(light * finalColor * lightColor, 1.0);
    }
</script>
<script type="x-shader/x-vertex" id="atmosphere-vert-shader">
    attribute float size;

    varying vec3 fragPosition;

    void main() {
      gl_PointSize = size;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      fragPosition = (modelMatrix * vec4(position, 1.0)).xyz;
    }
</script>
<script type="x-shader/x-fragment" id="atmosphere-frag-shader">
    uniform float time;
    uniform float speed;
    uniform float opacity;
    uniform float density;
    uniform float scale;

    uniform vec3 lightDirection;

    uniform vec3 color;
    uniform sampler2D pointTexture;

    varying vec3 fragPosition;

    vec2 rotateUV(vec2 uv, float rotation) {
        float mid = 0.5;
        return vec2(
            cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,
            cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid
        );
    }

    void main() {
      vec3 R = normalize(fragPosition);
      vec3 L = normalize(lightDirection);
      float light = max(0.05, dot(R, L));

      float n = simplex3((time * speed) + fragPosition / scale);
      float alpha = opacity * clamp(n + density, 0.0, 1.0);

      vec2 rotCoords = rotateUV(gl_PointCoord, n);
      gl_FragColor = vec4(light * color, alpha) * texture2D(pointTexture, gl_PointCoord);
    }
</script>


<script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
</script>
<script type="module" src="/space/particleSystem.js"></script>
<script type="module" src="/space/script.js"></script>
</body>

</html>